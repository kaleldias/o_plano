<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>O PLANO - Todos os Posts (Super Admin)</title>
    <link rel="stylesheet" href="posts.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- Fonte: Barlow e K2D -->
    <link
        href="https://fonts.googleapis.com/css2?family=Barlow:wght@400;500;600;700;800;900&family=K2D:wght@400;500;600;700;800&display=swap"
        rel="stylesheet">
</head>

<body>
    <!-- Navbar -->
    <header class="main-header">
        <div class="header-content">
            <div class="logo-area">
                <img src="img/logo.png" alt="O Plano" class="logo">
            </div>
            <nav class="main-nav">
                <ul class="nav-list">
                    <li><a href="index.html">Home</a></li>
                    <li><a href="login.html">Login</a></li>
                    <li><a href="index-register.html">Registro</a></li>
                    <li><a href="todas_noticias.html">Notícias</a></li>
                </ul>
            </nav>
            <div class="header-actions">
                <a href="escrever.html" class="action-link">Escreva</a>
                <a href="perfil.html" class="action-link">Perfil</a>
            </div>
        </div>
    </header>

    <main class="admin-container">
        <section class="admin-card">
            <h1 class="card-title">Super Admin</h1>
            <h2 class="section-subtitle">Todos os Posts</h2>

            <!-- Barra de filtro/pesquisa (opcional) -->
            <div class="filter-bar">
                <input type="text" class="input-filter" placeholder="Pesquisar posts...">
                <button class="btn-filter">Filtrar</button>
            </div>

            <!-- Grid de Posts -->
            <div class="posts-grid">
                <!-- Card de Post -->
                <div class="post-card" data-post-id="1">
                    <div class="post-image">
                        <img src="img/lula-filho-da-puta.jpeg" alt="Post 1">
                    </div>
                    <div class="post-content">
                        <h3 class="post-title">Título do Post 1</h3>
                        <p class="post-meta">Publicado em: 10/12/2024 14:20 <br><span class="detail-who">Por: Admin X</span></p>
                        <p class="post-excerpt">Este é um breve resumo do post, mostrando apenas algumas linhas do
                            conteúdo...</p>
                        <div class="post-actions">
                            <button class="btn-edit" data-post-id="1">Editar</button>
                            <a href="post_publico.html?id=1" class="btn-view" target="_blank">Visualizar</a>
                        </div>
                    </div>
                </div>

                <!-- Outro Card -->
                <div class="post-card" data-post-id="2">
                    <div class="post-image">
                        <img src="img/lula-bebo.webp" alt="Post 2">
                    </div>
                    <div class="post-content">
                        <h3 class="post-title">Título do Post 2</h3>
                        <p class="post-meta">Publicado em: 08/12/2024 09:00 <br><span class="detail-who">Por: Kal-EL
                                Dias</p>
                        <p class="post-excerpt">Resumo breve do segundo post, destacando alguns tópicos interessantes...
                        </p>
                        <div class="post-actions">
                            <button class="btn-edit" data-post-id="2">Editar</button>
                            <a href="post_publico.html?id=2" class="btn-view" target="_blank">Visualizar</a>
                        </div>
                    </div>
                </div>

                <!-- Adicione quantos posts forem necessários -->
            </div>
        </section>
    </main>

    <!-- Dialog para edição do post -->
    <dialog id="dialog-editar-post">
        <form method="dialog" class="dialog-form">
            <h2>Edição do Post</h2>
            <p><strong>ID do Post:</strong> <span id="dialogPostId"></span></p>

            <div class="form-group">
                <label for="tituloEdicao">Título do Post:</label>
                <input type="text" id="tituloEdicao" name="tituloEdicao" placeholder="Editar título" />
            </div>

            <div class="form-group">
                <label for="statusEdicao">Status:</label>
                <select id="statusEdicao" name="statusEdicao">
                    <option value="Ativo">Ativo</option>
                    <option value="Rascunho">Rascunho</option>
                    <option value="Inativo">Inativo</option>
                </select>
            </div>

            <div class="form-group">
                <label for="conteudoEdicao">Conteúdo:</label>
                <textarea id="conteudoEdicao" name="conteudoEdicao" rows="6"
                    placeholder="Editar conteúdo do post..."></textarea>
            </div>

            <div class="form-group">
                <label for="imagemPost">Imagem do Post (opcional):</label>
                <input type="file" id="imagemPost" name="imagemPost" accept="image/*" />
                <!-- Espaço para pré-visualização da imagem -->
                <div class="image-preview-container">
                    <img id="imagePreview" alt="Pré-visualização da Imagem"
                        style="display:none; max-width:100%; border-radius:8px;" />
                </div>
            </div>

            <div class="dialog-actions">
                <button type="button" class="btn-remover">Remover</button>
                <button type="button" class="btn-salvar">Salvar</button>
                <button type="submit" class="btn-fechar">Fechar</button>
            </div>
        </form>
    </dialog>


    <footer class="main-footer">
        <p>&copy; 2024 O Plano - Todos os direitos reservados.</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const dialog = document.getElementById('dialog-editar-post');
            const btnEditList = document.querySelectorAll('.btn-edit');
            const dialogPostIdField = document.getElementById('dialogPostId');
            const tituloEdicao = document.getElementById('tituloEdicao');
            const statusEdicao = document.getElementById('statusEdicao');
            const conteudoEdicao = document.getElementById('conteudoEdicao');

            btnEditList.forEach(btn => {
                btn.addEventListener('click', () => {
                    const postId = btn.getAttribute('data-post-id');
                    // Fazer fetch no backend para carregar dados reais do post.
                    // Exemplo estático:
                    dialogPostIdField.textContent = postId;
                    if (postId === "1") {
                        tituloEdicao.value = "Título do Post 1";
                        statusEdicao.value = "Ativo";
                        conteudoEdicao.value = "Conteúdo do post 1 aqui...";
                    } else {
                        tituloEdicao.value = "Título do Post 2";
                        statusEdicao.value = "Rascunho";
                        conteudoEdicao.value = "Conteúdo do post 2 aqui...";
                    }

                    dialog.showModal();
                });
            });

            const btnSalvar = dialog.querySelector('.btn-salvar');
            btnSalvar.addEventListener('click', () => {
                const updatedTitulo = tituloEdicao.value;
                const updatedStatus = statusEdicao.value;
                const updatedConteudo = conteudoEdicao.value;
                const postId = dialogPostIdField.textContent;

                // fetch('/api/updatePost', {
                //   method: 'POST',
                //   body: JSON.stringify({id: postId, titulo: updatedTitulo, status: updatedStatus, conteudo: updatedConteudo})
                //   ...
                // })

                alert('Post atualizado com sucesso!');
            });

            const btnRemover = dialog.querySelector('.btn-remover');
            btnRemover.addEventListener('click', () => {
                const postId = dialogPostIdField.textContent;
                // fetch('/api/removePost?id=' + postId, {method:'POST'...})
                alert('Post removido!');
            });
        });
    </script>
</body>

</html>